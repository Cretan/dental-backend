<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dental API Documentation</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/swagger-ui-dist@5.0.0/swagger-ui.css"
    />
    <style>
      body { margin: 0; padding: 0; }
      .swagger-ui .topbar { display: none; }
    </style>
  </head>
  <body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@5.0.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.0.0/swagger-ui-standalone-preset.js"></script>
    <script>
      window.onload = function () {
        fetch('./swagger-spec.json', { method: 'HEAD' })
          .then(function (res) {
            if (!res.ok) throw new Error('not found');
            SwaggerUIBundle({
              url: './swagger-spec.json',
              dom_id: '#swagger-ui',
              presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIStandalonePreset,
              ],
              layout: 'StandaloneLayout',
              deepLinking: true,
              defaultModelsExpandDepth: 1,
              defaultModelExpandDepth: 1,
              docExpansion: 'list',
              filter: true,
              showExtensions: false,
              showCommonExtensions: true,
            });
          })
          .catch(function () {
            document.getElementById('swagger-ui').innerHTML =
              '<div style="padding:40px;font-family:sans-serif;max-width:600px;margin:0 auto">' +
              '<h1>API Documentation</h1>' +
              '<p>The OpenAPI spec has not been generated yet. Run:</p>' +
              '<pre style="background:#f4f4f4;padding:12px;border-radius:4px">' +
              'cd dental-backend\nnpm run docs:generate</pre>' +
              '<p>Then refresh this page.</p></div>';
          });
      };
    </script>
  </body>
</html>
